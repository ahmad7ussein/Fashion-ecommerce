diff --git a/fashion-ecommerce/app/admin/(modules)/virtual-experience/page.jsx b/fashion-ecommerce/app/admin/(modules)/virtual-experience/page.jsx
index d91b178..2b22f02 100644
--- a/fashion-ecommerce/app/admin/(modules)/virtual-experience/page.jsx
+++ b/fashion-ecommerce/app/admin/(modules)/virtual-experience/page.jsx
@@ -5,0 +6 @@ import { useAuth } from "@/lib/auth";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -124 +125 @@ export default function VirtualExperienceControlPage() {
-            const imageUrl = product.image || product.images?.[0] || "/placeholder-logo.png";
+            const imageUrl = sanitizeExternalUrl(product.image || product.images?.[0] || "") || "/placeholder-logo.png";
diff --git a/fashion-ecommerce/app/admin/page.jsx b/fashion-ecommerce/app/admin/page.jsx
index c8f94be..47e7e38 100644
--- a/fashion-ecommerce/app/admin/page.jsx
+++ b/fashion-ecommerce/app/admin/page.jsx
@@ -27,0 +28 @@ import { useLanguage } from "@/lib/language";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -59,0 +60,11 @@ const parseColorList = (value) => value.split(",").map((color) => color.trim()).
+const resolveImageUrl = (value) => {
+    if (!value)
+        return "";
+    if (typeof value === "string")
+        return sanitizeExternalUrl(value);
+    if (value && typeof value === "object") {
+        const candidate = value.url || value.secure_url || value.path;
+        return typeof candidate === "string" ? sanitizeExternalUrl(candidate) : "";
+    }
+    return "";
+};
@@ -1705 +1709 @@ function AdminDashboardContent() {
-                                        <Image src={product.image || "/placeholder-logo.png"} alt={product.name || "Product"} fill className="object-cover" sizes="64px" loading="lazy" quality={75} onError={(e) => {
+                                        <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name || "Product"} fill className="object-cover" sizes="64px" loading="lazy" quality={75} onError={(e) => {
@@ -1897 +1901 @@ function AdminDashboardContent() {
-                            <img src={productForm.image} alt={language === "ar" ? "معاينة الصورة الرئيسية" : "Main image preview"} className="w-full h-full object-cover"/>
+                            <img src={sanitizeExternalUrl(productForm.image || "")} alt={language === "ar" ? "معاينة الصورة الرئيسية" : "Main image preview"} className="w-full h-full object-cover"/>
@@ -1941 +1945 @@ function AdminDashboardContent() {
-                                  <img src={productForm.images[index]} alt={language === "ar" ? `صورة إضافية ${index + 1}` : `Additional image ${index + 1}`} className="w-full h-full object-cover"/>
+                                  <img src={sanitizeExternalUrl(productForm.images[index] || "")} alt={language === "ar" ? `صورة إضافية ${index + 1}` : `Additional image ${index + 1}`} className="w-full h-full object-cover"/>
@@ -3497 +3511 @@ function AdminDashboardContent() {
-                        <img src={item.image} alt={item.name} className="w-16 h-16 object-cover rounded"/>
+                        <img src={sanitizeExternalUrl(item.image || "")} alt={item.name} className="w-16 h-16 object-cover rounded"/>
@@ -3597 +3611 @@ function AdminDashboardContent() {
-                    {previewBaseImage ? (<img src={previewBaseImage} alt={designPreviewItem.name} className="h-full w-full object-contain"/>) : (<div className="flex h-full w-full items-center justify-center text-sm text-muted-foreground">
+                    {previewBaseImage ? (<img src={sanitizeExternalUrl(previewBaseImage || "")} alt={designPreviewItem.name} className="h-full w-full object-contain"/>) : (<div className="flex h-full w-full items-center justify-center text-sm text-muted-foreground">
@@ -3611 +3625 @@ function AdminDashboardContent() {
-                            <img src={previewSideData.uploadedImage} alt="Design asset" className="h-full w-full object-contain"/>
+                            <img src={sanitizeExternalUrl(previewSideData.uploadedImage || "")} alt="Design asset" className="h-full w-full object-contain"/>
diff --git a/fashion-ecommerce/app/cart/page.jsx b/fashion-ecommerce/app/cart/page.jsx
index fc6e309..81204b3 100644
--- a/fashion-ecommerce/app/cart/page.jsx
+++ b/fashion-ecommerce/app/cart/page.jsx
@@ -11,0 +12 @@ import { useRegion } from "@/lib/region";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -43 +44 @@ export default function CartPage() {
-                          <Image src={item.image || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="(max-width: 640px) 100vw, 128px"/>
+                          <Image src={sanitizeExternalUrl(item.image || "") || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="(max-width: 640px) 100vw, 128px"/>
diff --git a/fashion-ecommerce/app/checkout/page.jsx b/fashion-ecommerce/app/checkout/page.jsx
index 979d58a..12c3651 100644
--- a/fashion-ecommerce/app/checkout/page.jsx
+++ b/fashion-ecommerce/app/checkout/page.jsx
@@ -17,0 +18 @@ import { paymentsApi } from "@/lib/api/payments";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -258 +259 @@ export default function CheckoutPage() {
-                            <Image src={item.image || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="64px"/>
+                            <Image src={sanitizeExternalUrl(item.image || "") || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="64px"/>
diff --git a/fashion-ecommerce/app/collection/page.jsx b/fashion-ecommerce/app/collection/page.jsx
index 396f8ad..c31ab8c 100644
--- a/fashion-ecommerce/app/collection/page.jsx
+++ b/fashion-ecommerce/app/collection/page.jsx
@@ -17,0 +18 @@ import { useCart } from "@/lib/cart";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -238 +239 @@ export default function CollectionPage() {
-                <Image src={product.image || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
+                <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
diff --git a/fashion-ecommerce/app/collections/page.jsx b/fashion-ecommerce/app/collections/page.jsx
index 23ef527..0844d7f 100644
--- a/fashion-ecommerce/app/collections/page.jsx
+++ b/fashion-ecommerce/app/collections/page.jsx
@@ -17,0 +18 @@ import { useCart } from "@/lib/cart";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -358 +359 @@ export default function CollectionsPage() {
-                            <Image src={heroSlides[currentSlide].image || "/placeholder-logo.png"} alt={heroSlides[currentSlide].name} fill className="object-contain rounded-2xl" priority={currentSlide === 0} sizes="(max-width: 768px) 100vw, 50vw"/>
+                            <Image src={sanitizeExternalUrl(heroSlides[currentSlide].image || "") || "/placeholder-logo.png"} alt={heroSlides[currentSlide].name} fill className="object-contain rounded-2xl" priority={currentSlide === 0} sizes="(max-width: 768px) 100vw, 50vw"/>
@@ -441 +442 @@ export default function CollectionsPage() {
-                            <Image src={product.image || "/placeholder-logo.png"} alt={product.name} fill className="object-cover group-hover:scale-110 transition-transform duration-700" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
+                            <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name} fill className="object-cover group-hover:scale-110 transition-transform duration-700" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
diff --git a/fashion-ecommerce/app/employee/page.jsx b/fashion-ecommerce/app/employee/page.jsx
index 8331fe5..acec07b 100644
--- a/fashion-ecommerce/app/employee/page.jsx
+++ b/fashion-ecommerce/app/employee/page.jsx
@@ -24,0 +25 @@ import { useLanguage } from "@/lib/language";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -76,0 +79,11 @@ const parseColorList = (value) => value.split(",").map((color) => color.trim()).
+const resolveImageUrl = (value) => {
+    if (!value)
+        return "";
+    if (typeof value === "string")
+        return sanitizeExternalUrl(value);
+    if (value && typeof value === "object") {
+        const candidate = value.url || value.secure_url || value.path;
+        return typeof candidate === "string" ? sanitizeExternalUrl(candidate) : "";
+    }
+    return "";
+};
@@ -1734 +1754 @@ export default function EmployeeDashboard() {
-                                        <Image src={product.image || "/placeholder-logo.png"} alt={product.name || "Product"} fill className="object-cover" sizes="64px" onError={(e) => {
+                                        <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name || "Product"} fill className="object-cover" sizes="64px" onError={(e) => {
@@ -1898 +1918 @@ export default function EmployeeDashboard() {
-                            <img src={productForm.image} alt={language === "ar" ? "معاينة الصورة الرئيسية" : "Main image preview"} className="w-full h-full object-cover"/>
+                            <img src={sanitizeExternalUrl(productForm.image || "")} alt={language === "ar" ? "معاينة الصورة الرئيسية" : "Main image preview"} className="w-full h-full object-cover"/>
@@ -1942 +1962 @@ export default function EmployeeDashboard() {
-                                  <img src={productForm.images[index]} alt={language === "ar" ? `صورة إضافية ${index + 1}` : `Additional image ${index + 1}`} className="w-full h-full object-cover"/>
+                                  <img src={sanitizeExternalUrl(productForm.images[index] || "")} alt={language === "ar" ? `صورة إضافية ${index + 1}` : `Additional image ${index + 1}`} className="w-full h-full object-cover"/>
@@ -2322 +2342 @@ export default function EmployeeDashboard() {
-                          <img src={item.image} alt={item.name} className="w-12 h-12 object-cover rounded"/>
+                          <img src={sanitizeExternalUrl(item.image || "")} alt={item.name} className="w-12 h-12 object-cover rounded"/>
@@ -2439 +2459 @@ export default function EmployeeDashboard() {
-                  {previewBaseImage ? (<img src={previewBaseImage} alt={designPreviewItem.name} className="h-full w-full object-contain"/>) : (<div className="flex h-full w-full items-center justify-center text-sm text-muted-foreground">
+                  {previewBaseImage ? (<img src={sanitizeExternalUrl(previewBaseImage || "")} alt={designPreviewItem.name} className="h-full w-full object-contain"/>) : (<div className="flex h-full w-full items-center justify-center text-sm text-muted-foreground">
@@ -2453 +2473 @@ export default function EmployeeDashboard() {
-                          <img src={previewSideData.uploadedImage} alt="Design asset" className="h-full w-full object-contain"/>
+                          <img src={sanitizeExternalUrl(previewSideData.uploadedImage || "")} alt="Design asset" className="h-full w-full object-contain"/>
diff --git a/fashion-ecommerce/app/forgot-password/page.jsx b/fashion-ecommerce/app/forgot-password/page.jsx
index 584cbc6..0c46f33 100644
--- a/fashion-ecommerce/app/forgot-password/page.jsx
+++ b/fashion-ecommerce/app/forgot-password/page.jsx
@@ -11,0 +12 @@ import logger from "@/lib/logger";
+import { API_BASE_URL } from "@/lib/api";
@@ -38 +38,0 @@ export default function ForgotPasswordPage() {
-            const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
diff --git a/fashion-ecommerce/app/login/page.jsx b/fashion-ecommerce/app/login/page.jsx
index 5eb9c72..bff9866 100644
--- a/fashion-ecommerce/app/login/page.jsx
+++ b/fashion-ecommerce/app/login/page.jsx
@@ -14,0 +15 @@ import logger from "@/lib/logger";
+import { API_BASE_URL } from "@/lib/api";
@@ -152 +152,0 @@ export default function LoginPage() {
-            const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5001/api";
@@ -323 +349 @@ export default function LoginPage() {
-                errorDetails = "The backend server is not running or not accessible. Please:\n• Make sure the backend server is running on http://localhost:5000\n• Check if the server is started correctly\n• Verify your internet connection";
+                errorDetails = `The backend server is not running or not accessible. Please:\n• Make sure the backend server is running on ${API_BASE_URL.replace("/api", "")}\n• Check if the server is started correctly\n• Verify your internet connection`;
@@ -444 +470 @@ export default function LoginPage() {
-              <li>Make sure the backend server is running on http://localhost:5000</li>
+              <li>Make sure the backend server is running on {API_BASE_URL.replace("/api", "")}</li>
diff --git a/fashion-ecommerce/app/my-designs/page.jsx b/fashion-ecommerce/app/my-designs/page.jsx
index c4f69fa..bb3d01e 100644
--- a/fashion-ecommerce/app/my-designs/page.jsx
+++ b/fashion-ecommerce/app/my-designs/page.jsx
@@ -13,0 +14 @@ import { useToast } from "@/hooks/use-toast";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -68 +69 @@ const parseLocalDesigns = (key) => {
-            thumbnail: design.thumbnail || "",
+            thumbnail: sanitizeExternalUrl(design.thumbnail || ""),
@@ -209 +210 @@ export default function MyDesignsPage() {
-                image: design.thumbnail || design.designImageURL || "",
+                image: sanitizeExternalUrl(design.thumbnail || design.designImageURL || ""),
@@ -342 +343 @@ export default function MyDesignsPage() {
-                  <Image src={design.thumbnail || "/placeholder-logo.png"} alt={design.name} fill className="object-cover group-hover:scale-105 transition-transform duration-300" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
+                  <Image src={sanitizeExternalUrl(design.thumbnail || "") || "/placeholder-logo.png"} alt={design.name} fill className="object-cover group-hover:scale-105 transition-transform duration-300" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
@@ -383 +384 @@ export default function MyDesignsPage() {
-                      <Image src={design.thumbnail || "/placeholder-logo.png"} alt={design.name} fill className="object-cover" sizes="128px"/>
+                      <Image src={sanitizeExternalUrl(design.thumbnail || "") || "/placeholder-logo.png"} alt={design.name} fill className="object-cover" sizes="128px"/>
diff --git a/fashion-ecommerce/app/new-arrival/page.jsx b/fashion-ecommerce/app/new-arrival/page.jsx
index c9911d2..4cbe89c 100644
--- a/fashion-ecommerce/app/new-arrival/page.jsx
+++ b/fashion-ecommerce/app/new-arrival/page.jsx
@@ -17,0 +18 @@ import { useCart } from "@/lib/cart";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -244 +245 @@ export default function NewArrivalPage() {
-                          <Image src={product.image || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
+                          <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
diff --git a/fashion-ecommerce/app/page.jsx b/fashion-ecommerce/app/page.jsx
index e52f7a4..7ddad00 100644
--- a/fashion-ecommerce/app/page.jsx
+++ b/fashion-ecommerce/app/page.jsx
@@ -19,0 +20 @@ import { FeaturedProductsSkeleton } from "@/components/skeletons";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -133 +134 @@ export default function HomePage() {
-                        image: product.viewMockups?.front || product.baseMockupUrl || product.image || "",
+                        image: sanitizeExternalUrl(product.viewMockups?.front || product.baseMockupUrl || product.image || ""),
@@ -361 +362 @@ export default function HomePage() {
-                          <Image src={activeSlide.image} alt={activeSlide.title} fill className="object-contain rounded-2xl" priority={currentSlide === 0} sizes="(max-width: 768px) 100vw, 50vw"/>
+                          <Image src={sanitizeExternalUrl(activeSlide.image || "") || "/placeholder-logo.png"} alt={activeSlide.title} fill className="object-contain rounded-2xl" priority={currentSlide === 0} sizes="(max-width: 768px) 100vw, 50vw"/>
@@ -441 +442 @@ export default function HomePage() {
-                              {product.image ? (<Image src={product.image} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
+                              {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
@@ -498 +499 @@ export default function HomePage() {
-                              {product.image ? (<Image src={product.image} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
+                              {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
@@ -582 +583 @@ export default function HomePage() {
-                              {product.image ? (<Image src={product.image} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
+                              {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
@@ -628 +629 @@ export default function HomePage() {
-                              {product.image ? (<Image src={product.image} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
+                              {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
@@ -674 +675 @@ export default function HomePage() {
-                              {product.image ? (<Image src={product.image} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
+                              {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name} fill className="object-cover"/>) : (<div className="w-full h-full flex items-center justify-center">
@@ -753 +754 @@ export default function HomePage() {
-                      {product.image ? (<Image src={product.image} alt={product.name || "Product"} fill className="object-cover group-hover:scale-110 transition-transform duration-300" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>) : (<div className="w-full h-full flex items-center justify-center">
+                      {product.image ? (<Image src={sanitizeExternalUrl(product.image) || "/placeholder-logo.png"} alt={product.name || "Product"} fill className="object-cover group-hover:scale-110 transition-transform duration-300" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>) : (<div className="w-full h-full flex items-center justify-center">
diff --git a/fashion-ecommerce/app/products/[id]/ProductDetailPageClient.jsx b/fashion-ecommerce/app/products/[id]/ProductDetailPageClient.jsx
index 1e2fa58..fd6b659 100644
--- a/fashion-ecommerce/app/products/[id]/ProductDetailPageClient.jsx
+++ b/fashion-ecommerce/app/products/[id]/ProductDetailPageClient.jsx
@@ -19,0 +20 @@ import { favoritesApi } from "@/lib/api/favorites";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -327 +328 @@ export default function ProductDetailPageClient() {
-    const images = allImages.filter(img => img && img.trim() !== "");
+    const images = allImages.map((value) => sanitizeExternalUrl(value || "")).filter(Boolean);
@@ -506 +507 @@ export default function ProductDetailPageClient() {
-                            <Image src={relatedProduct.image || "/placeholder-logo.png"} alt={relatedProduct.name} fill className="object-cover group-hover:scale-110 transition-transform duration-700" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
+                            <Image src={sanitizeExternalUrl(relatedProduct.image || "") || "/placeholder-logo.png"} alt={relatedProduct.name} fill className="object-cover group-hover:scale-110 transition-transform duration-700" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw"/>
@@ -548 +549 @@ export default function ProductDetailPageClient() {
-                                    image: relatedProduct.image,
+                                    image: sanitizeExternalUrl(relatedProduct.image || ""),
diff --git a/fashion-ecommerce/app/products/page.jsx b/fashion-ecommerce/app/products/page.jsx
index 49f9dc1..3a4959e 100644
--- a/fashion-ecommerce/app/products/page.jsx
+++ b/fashion-ecommerce/app/products/page.jsx
@@ -21,0 +22 @@ import { useRouter } from "next/navigation";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -530 +549 @@ function ProductsPageContent() {
-                      <Image src={product.image || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onError={(e) => {
+                      <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onError={(e) => {
diff --git a/fashion-ecommerce/app/profile/page.jsx b/fashion-ecommerce/app/profile/page.jsx
index 1fecf18..f8c5bda 100644
--- a/fashion-ecommerce/app/profile/page.jsx
+++ b/fashion-ecommerce/app/profile/page.jsx
@@ -14,0 +15 @@ import { useToast } from "@/hooks/use-toast";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -69 +70 @@ const parseLocalDesigns = (key) => {
-            thumbnail: design.thumbnail || "",
+            thumbnail: sanitizeExternalUrl(design.thumbnail || ""),
@@ -400 +401 @@ export default function ProfilePage() {
-                                <Image src={item.image || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="64px"/>
+                                <Image src={sanitizeExternalUrl(item.image || "") || "/placeholder-logo.png"} alt={item.name} fill className="object-cover" sizes="64px"/>
@@ -442 +443 @@ export default function ProfilePage() {
-                        <Image src={design.thumbnail || "/placeholder-logo.png"} alt={design.name} fill className="object-cover" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"/>
+                        <Image src={sanitizeExternalUrl(design.thumbnail || "") || "/placeholder-logo.png"} alt={design.name} fill className="object-cover" sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"/>
diff --git a/fashion-ecommerce/app/reset-password/page.jsx b/fashion-ecommerce/app/reset-password/page.jsx
index a9edc25..7083d4a 100644
--- a/fashion-ecommerce/app/reset-password/page.jsx
+++ b/fashion-ecommerce/app/reset-password/page.jsx
@@ -12,0 +13 @@ import logger from "@/lib/logger";
+import { API_BASE_URL } from "@/lib/api";
@@ -62 +62,0 @@ function ResetPasswordContent() {
-            const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
diff --git a/fashion-ecommerce/app/sale/page.jsx b/fashion-ecommerce/app/sale/page.jsx
index c18751d..334efbd 100644
--- a/fashion-ecommerce/app/sale/page.jsx
+++ b/fashion-ecommerce/app/sale/page.jsx
@@ -13,0 +14 @@ import { Tag } from "lucide-react";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -70 +71 @@ export default function SalePage() {
-                        <Image src={product.image || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
+                        <Image src={sanitizeExternalUrl(product.image || "") || "/placeholder-logo.png"} alt={product.name} width={300} height={300} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy"/>
diff --git a/fashion-ecommerce/app/signup/page.jsx b/fashion-ecommerce/app/signup/page.jsx
index c858122..9af81dd 100644
--- a/fashion-ecommerce/app/signup/page.jsx
+++ b/fashion-ecommerce/app/signup/page.jsx
@@ -14,0 +15 @@ import { Separator } from "@/components/ui/separator";
+import { API_BASE_URL } from "@/lib/api";
@@ -96 +97 @@ export default function SignupPage() {
-                errorMessage = "Cannot connect to the server. Please make sure the backend server is running on http://localhost:5000";
+                errorMessage = `Cannot connect to the server. Please make sure the backend server is running on ${API_BASE_URL.replace("/api", "")}`;
@@ -117,0 +119,80 @@ export default function SignupPage() {
+    const exchangeGoogleToken = async (idToken) => {
+        if (!idToken) {
+            toast({
+                title: "Google login failed",
+                description: "No credential returned by Google.",
+                variant: "destructive",
+            });
+            return;
+        }
+        setIsGoogleLoading(true);
+        try {
+            toast({
+                title: "جاري إنشاء الحساب...",
+                description: "يرجى الانتظار",
+            });
+            const backendResponse = await fetch(`${API_BASE_URL}/auth/google`, {
+                method: 'POST',
+                headers: {
+                    'Content-Type': 'application/json',
+                },
+                credentials: 'include',
+                body: JSON.stringify({
+                    idToken,
+                }),
+            });
+            const data = await backendResponse.json();
+            if (!backendResponse.ok || !data.success) {
+                throw new Error(data.message || 'Google login failed');
+            }
+            if (data.data.token) {
+                localStorage.setItem('auth_token', data.data.token);
+            }
+            toast({
+                title: "تم إنشاء الحساب بنجاح! ✨",
+                description: `مرحباً ${data.data.user.firstName}!`,
+            });
+            const role = String(data.data.user.role || "").toLowerCase().trim();
+            const redirectUrl = role === "admin"
+                ? "/admin"
+                : role === "employee"
+                    ? "/employee"
+                    : "/profile";
+            router.replace(redirectUrl);
+        }
+        catch (error) {
+            console.error("❌ Google login error:", error);
+            toast({
+                title: "فشل التسجيل",
+                description: error.message || "حدث خطأ أثناء التسجيل باستخدام Google",
+                variant: "destructive",
+            });
+        }
+        finally {
+            setIsGoogleLoading(false);
+        }
+    };
+    const handleNativeGoogleLogin = async (e) => {
+        if (e) {
+            e.preventDefault();
+            e.stopPropagation();
+        }
+        try {
+            const { GoogleAuth } = await import("@codetrix-studio/capacitor-google-auth");
+            const clientId = process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID;
+            if (clientId) {
+                await GoogleAuth.initialize({ clientId });
+            }
+            const result = await GoogleAuth.signIn();
+            const idToken = result?.authentication?.idToken || result?.idToken;
+            await exchangeGoogleToken(idToken);
+        }
+        catch (error) {
+            console.error("❌ Google native login error:", error);
+            toast({
+                title: "فشل التسجيل",
+                description: error.message || "حدث خطأ أثناء التسجيل باستخدام Google",
+                variant: "destructive",
+            });
+        }
+    };
@@ -179,45 +264 @@ export default function SignupPage() {
-                try {
-                    setIsGoogleLoading(false);
-                    const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
-                    toast({
-                        title: "جاري إنشاء الحساب...",
-                        description: "يرجى الانتظار",
-                    });
-                    const backendResponse = await fetch(`${API_BASE_URL}/auth/google`, {
-                        method: 'POST',
-                        headers: {
-                            'Content-Type': 'application/json',
-                        },
-                        credentials: 'include',
-                        body: JSON.stringify({
-                            idToken: response.credential,
-                        }),
-                    });
-                    const data = await backendResponse.json();
-                    if (!backendResponse.ok || !data.success) {
-                        throw new Error(data.message || 'Google login failed');
-                    }
-                    if (data.data.token) {
-                        localStorage.setItem('auth_token', data.data.token);
-                    }
-                    toast({
-                        title: "تم إنشاء الحساب بنجاح! ✨",
-                        description: `مرحباً ${data.data.user.firstName}!`,
-                    });
-                    const role = String(data.data.user.role || "").toLowerCase().trim();
-                    const redirectUrl = role === "admin"
-                        ? "/admin"
-                        : role === "employee"
-                            ? "/employee"
-                            : "/profile";
-                    router.replace(redirectUrl);
-                }
-                catch (error) {
-                    setIsGoogleLoading(false);
-                    console.error("❌ Google login error:", error);
-                    toast({
-                        title: "فشل التسجيل",
-                        description: error.message || "حدث خطأ أثناء التسجيل باستخدام Google",
-                        variant: "destructive",
-                    });
-                }
+                await exchangeGoogleToken(response?.credential);
diff --git a/fashion-ecommerce/app/studio/components/ProductPreview.jsx b/fashion-ecommerce/app/studio/components/ProductPreview.jsx
index c0e6260..dc356d6 100644
--- a/fashion-ecommerce/app/studio/components/ProductPreview.jsx
+++ b/fashion-ecommerce/app/studio/components/ProductPreview.jsx
@@ -2,0 +3 @@ import { getProductImagePath } from "../utils/productImages";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -4 +5 @@ export function ProductPreview({ productType, productColor, currentSide, onSideC
-    const currentImage = mockupUrl || getProductImagePath(productType, currentSide);
+    const currentImage = sanitizeExternalUrl(mockupUrl || getProductImagePath(productType, currentSide)) || "/placeholder-logo.png";
diff --git a/fashion-ecommerce/app/studio/page.jsx b/fashion-ecommerce/app/studio/page.jsx
index 09e4696..88d44fb 100644
--- a/fashion-ecommerce/app/studio/page.jsx
+++ b/fashion-ecommerce/app/studio/page.jsx
@@ -34,0 +35 @@ import { useAuth } from "@/lib/auth";
+import { sanitizeExternalUrl } from "@/lib/api";
@@ -126,0 +128,10 @@ const normalizeColorKey = (value) => String(value || "").trim().toLowerCase();
+const resolveImageUrl = (value) => {
+  if (!value) return "";
+  if (typeof value === "string") return sanitizeExternalUrl(value);
+  if (value && typeof value === "object") {
+    const candidate = value.url || value.secure_url || value.path;
+    return typeof candidate === "string" ? sanitizeExternalUrl(candidate) : "";
+  }
+  return "";
+};
+
@@ -1107 +1131 @@ export default function DesignStudioPage() {
-                          src={productPreviewImage || activeProduct?.image || "/placeholder-logo.png"}
+                          src={sanitizeExternalUrl(productPreviewImage || activeProduct?.image || "") || "/placeholder-logo.png"}
@@ -1566 +1600 @@ export default function DesignStudioPage() {
-                                src={design.thumbnail}
+                                src={sanitizeExternalUrl(design.thumbnail)}
diff --git a/fashion-ecommerce/components/staff-chat-panel.jsx b/fashion-ecommerce/components/staff-chat-panel.jsx
index 5cbf22d..0fa9a4a 100644
--- a/fashion-ecommerce/components/staff-chat-panel.jsx
+++ b/fashion-ecommerce/components/staff-chat-panel.jsx
@@ -13,0 +14 @@ import { Loader2 } from "lucide-react";
+import { API_BASE_URL } from "@/lib/api";
@@ -15 +15,0 @@ import { Loader2 } from "lucide-react";
-const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
diff --git a/fashion-ecommerce/lib/api/auth.js b/fashion-ecommerce/lib/api/auth.js
index b085d22..5a37d5e 100644
--- a/fashion-ecommerce/lib/api/auth.js
+++ b/fashion-ecommerce/lib/api/auth.js
@@ -5 +5 @@ export const authApi = {
-        const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
+        const { API_BASE_URL } = await import("@/lib/api");
@@ -127 +127 @@ export const authApi = {
-        const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
+        const { API_BASE_URL } = await import("@/lib/api");
diff --git a/fashion-ecommerce/lib/api/client.js b/fashion-ecommerce/lib/api/client.js
index 2d77201..a44dd5c 100644
--- a/fashion-ecommerce/lib/api/client.js
+++ b/fashion-ecommerce/lib/api/client.js
@@ -2 +2 @@ import logger from "@/lib/logger";
-const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api";
+import { API_BASE_URL } from "@/lib/api";
diff --git a/fashion-ecommerce/next.config.mjs b/fashion-ecommerce/next.config.mjs
index 543287c..f7dd4ff 100644
--- a/fashion-ecommerce/next.config.mjs
+++ b/fashion-ecommerce/next.config.mjs
@@ -31,0 +32,13 @@ const nextConfig = {
+  async rewrites() {
+    const target = process.env.API_PROXY_TARGET;
+    if (!target) {
+      return [];
+    }
+    const normalizedTarget = target.replace(/\/$/, "");
+    return [
+      {
+        source: "/api/:path*",
+        destination: `${normalizedTarget}/api/:path*`,
+      },
+    ];
+  },
diff --git a/.env.example b/.env.example
new file mode 100644
index 0000000..70a79de
--- /dev/null
+++ b/.env.example
@@ -0,0 +1,13 @@
+# Public API config
+NEXT_PUBLIC_API_BASE_URL=/api
+NEXT_PUBLIC_ANDROID_API_URL=http://10.0.2.2:5000/api
+NEXT_PUBLIC_USE_PROXY=true
+
+# Proxy target for local dev (Next.js rewrite)
+API_PROXY_TARGET=http://localhost:5000
+
+# OAuth
+NEXT_PUBLIC_GOOGLE_CLIENT_ID=
+
+# Backend
+FRONTEND_URL=http://localhost:3000
diff --git a/lib/api.ts b/lib/api.ts
new file mode 100644
index 0000000..1f37ee5
--- /dev/null
+++ b/lib/api.ts
@@ -0,0 +1,79 @@
+const RAW_API_BASE_URL =
+  process.env.NEXT_PUBLIC_API_BASE_URL || process.env.NEXT_PUBLIC_API_URL || "";
+const ANDROID_API_URL = process.env.NEXT_PUBLIC_ANDROID_API_URL || "";
+const USE_PROXY = process.env.NEXT_PUBLIC_USE_PROXY === "true";
+const FALLBACK_DEV_WEB_API_URL = "http://localhost:5000/api";
+
+const resolveIsNative = () => {
+  if (typeof window === "undefined") {
+    return false;
+  }
+  return Boolean(window?.Capacitor?.isNativePlatform?.());
+};
+
+const isHttpsPage = () =>
+  typeof window !== "undefined" && window.location?.protocol === "https:";
+
+const isProduction = () => process.env.NODE_ENV === "production";
+
+const isHttpUrl = (value: string) => value.startsWith("http://");
+
+const ensureHttpsApiUrl = (value: string) => {
+  if (!value) {
+    return value;
+  }
+  if (isHttpUrl(value)) {
+    if (isHttpsPage() || isProduction()) {
+      console.error("[API] Insecure API URL blocked on HTTPS page:", value);
+      return "";
+    }
+    console.warn("[API] Insecure API URL in development:", value);
+  }
+  return value;
+};
+
+export const getApiBaseUrl = () => {
+  if (resolveIsNative()) {
+    return ANDROID_API_URL || RAW_API_BASE_URL || FALLBACK_DEV_WEB_API_URL;
+  }
+
+  if (USE_PROXY) {
+    return "/api";
+  }
+
+  const safeApiUrl = ensureHttpsApiUrl(RAW_API_BASE_URL);
+  if (safeApiUrl) {
+    return safeApiUrl;
+  }
+
+  if (isHttpsPage() || isProduction()) {
+    return "/api";
+  }
+
+  return FALLBACK_DEV_WEB_API_URL;
+};
+
+export const API_BASE_URL = getApiBaseUrl();
+
+const CLOUDINARY_HTTP_PREFIX = "http://res.cloudinary.com/";
+const CLOUDINARY_HTTPS_PREFIX = "https://res.cloudinary.com/";
+
+export const sanitizeExternalUrl = (value: string) => {
+  if (!value) {
+    return "";
+  }
+  if (value.startsWith(CLOUDINARY_HTTP_PREFIX)) {
+    if (!isProduction()) {
+      console.warn("[Assets] Upgrading Cloudinary URL to HTTPS:", value);
+    }
+    return CLOUDINARY_HTTPS_PREFIX + value.slice(CLOUDINARY_HTTP_PREFIX.length);
+  }
+  if (value.startsWith("http://")) {
+    if (isHttpsPage() || isProduction()) {
+      console.error("[Assets] Insecure asset URL blocked:", value);
+      return "";
+    }
+    console.warn("[Assets] Insecure asset URL in development:", value);
+  }
+  return value;
+};
